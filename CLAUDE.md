# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

**CarteScolaire.paris** — An interactive map application for visualizing Paris school districts (collèges and lycées), including school locations, sector boundaries, and Brevet exam results (pass rates and distinction rates).

The site is a static website hosted at https://cartescolaire.netlify.app

## Architecture

### Frontend (Static Site)
- **index.html**: Single-page application using Leaflet.js for mapping
- **assets/js/app.js**: Main application logic — handles map initialization, layer management, address geocoding, and routing
- **data/*.geojson**: Geographic data files for schools and sectors
  - `colleges.geojson`: College locations + sector polygons (generated by pipeline)
  - `lycees.geojson`: Lycée locations
  - `secteurs_lyc.geojson`: Lycée sector boundaries

### Data Pipeline (Python)
Located in `python-pipeline/`:
- **run_pipeline.py**: Fetches data from opendata.paris.fr and data.education.gouv.fr APIs, merges datasets using fuzzy matching on school names, and outputs `data/colleges.geojson`

## Commands

### Update School Data
```bash
cd python-pipeline
pip install -r requirements.txt
python run_pipeline.py
```
This regenerates `data/colleges.geojson` with current school year data.

### Run Locally
Open `index.html` in a browser. No build step required.

## Key Technical Details

### Data Pipeline
- Uses fuzzy matching (`fuzzywuzzy`) to join Paris city data with national education ministry data
- School year is configured in `run_pipeline.py` via the `id_projet` parameter (e.g., `"COLLEGES (année scolaire 2024/2025)"`)
- Geometry simplification reduces GeoJSON size while maintaining ~1m precision
- Colors for pass rate visualization use a gradient based on percentile ranking

### Frontend Map
- Uses Leaflet.js with OpenStreetMap tiles
- Address geocoding via api-adresse.data.gouv.fr
- Walking route calculation via OpenRouteService API
- Sectors styled by zone color (random assignment), pass rate, or distinction rate
